from UI.menu_manager import MenuManager
from UI.team_captain_ui import TeamCaptainUI
from UI.user_ui import UserUI
from LL.api_ll import APILL
import os
import platform


def clear_terminal():
    system_name = platform.system()
    if system_name == "Windows":
        os.system("cls")
    else:  # macOS or Linux
        os.system("clear")


def print_welcome_sign():
    print("\033c", end="")
    print(r"""
     __       __  ________  __        ______    ______   __       __  ________        ________   ______                      
    |  \  _  |  \|        \|  \      /      \  /      \ |  \     /  \|        \      |        \ /      \                     
    | $$ / \ | $$| $$$$$$$$| $$     |  $$$$$$\|  $$$$$$\| $$\   /  $$| $$$$$$$$       \$$$$$$$$|  $$$$$$\                    
    | $$/  $\| $$| $$__    | $$     | $$   \$$| $$  | $$| $$$\ /  $$$| $$__             | $$   | $$  | $$                    
    | $$  $$$\ $$| $$  \   | $$     | $$      | $$  | $$| $$$$\  $$$$| $$  \            | $$   | $$  | $$                    
    | $$ $$\$$\$$| $$$$$   | $$     | $$   __ | $$  | $$| $$\$$ $$ $$| $$$$$            | $$   | $$  | $$                    
    | $$$$  \$$$$| $$_____ | $$_____| $$__/  \| $$__/ $$| $$ \$$$| $$| $$_____          | $$   | $$__/ $$                    
    | $$$    \$$$| $$     \| $$     \\$$    $$ \$$    $$| $$  \$ | $$| $$     \         | $$    \$$    $$                    
     \$$      \$$ \$$$$$$$$ \$$$$$$$$ \$$$$$$   \$$$$$$  \$$      \$$ \$$$$$$$$          \$$     \$$$$$$                     
     ________  __    __  ________  _______    ______   __     __   ______    ______    ______   __    __  ________   ______  
    |        \|  \  |  \|        \|       \  /      \ |  \   |  \ /      \  /      \  /      \ |  \  |  \|        \ /      \ 
    | $$$$$$$$| $$  | $$ \$$$$$$$$| $$$$$$$\|  $$$$$$\| $$   | $$|  $$$$$$\|  $$$$$$\|  $$$$$$\| $$\ | $$ \$$$$$$$$|  $$$$$$\
    | $$__     \$$\/  $$   | $$   | $$__| $$| $$__| $$| $$   | $$| $$__| $$| $$ __\$$| $$__| $$| $$$\| $$    /  $$ | $$__| $$
    | $$  \     >$$  $$    | $$   | $$    $$| $$    $$ \$$\ /  $$| $$    $$| $$|    \| $$    $$| $$$$\ $$   /  $$  | $$    $$
    | $$$$$    /  $$$$\    | $$   | $$$$$$$\| $$$$$$$$  \$$\  $$ | $$$$$$$$| $$ \$$$$| $$$$$$$$| $$\$$ $$  /  $$   | $$$$$$$$
    | $$_____ |  $$ \$$\   | $$   | $$  | $$| $$  | $$   \$$ $$  | $$  | $$| $$__| $$| $$  | $$| $$ \$$$$ /  $$___ | $$  | $$
    | $$     \| $$  | $$   | $$   | $$  | $$| $$  | $$    \$$$   | $$  | $$ \$$    $$| $$  | $$| $$  \$$$|  $$    \| $$  | $$
     \$$$$$$$$ \$$   \$$    \$$    \$$   \$$ \$$   \$$     \$     \$$   \$$  \$$$$$$  \$$   \$$ \$$   \$$ \$$$$$$$$ \$$   \$$
        
""")


def print_welcome_sign_test():
    print(r"""
________                            _____________             ______ ______      _____ 
__  ___/___  ____________________  ___  ___/__  /________________  /____  /________  /_
_____ \_  / / /_  ___/_  ___/_  / / /____ \__  __ \_  ___/  _ \_  //_/_  //_/  _ \  __/
____/ // /_/ /_(__  )_(__  )_  /_/ /____/ /_  / / /  /   /  __/  ,<  _  ,<  /  __/ /_  
/____/ \__,_/ /____/ /____/ _\__, / /____/ /_/ /_//_/    \___//_/|_| /_/|_| \___/\__/  
                            /____/                                                     
""")


class MainUI:
    def __init__(self):
        self.APILL = APILL()
        self.menu_manager = MenuManager(self.APILL)
        self.previous_screen = ""
        self.current_screen = "LOGIN_MENU"

    def run(self) -> None:
        """Main loop handling navigation"""
        while True:
            func = self.menu_manager.pages.get(self.current_screen)

            if func is None:
                print(f"Unknown screen: {self.current_screen}")
                break

            clear_terminal()
            print_welcome_sign()

            next_screen = func()

            if next_screen in (None, "QUIT"):
                break

            self.current_screen = next_screen
